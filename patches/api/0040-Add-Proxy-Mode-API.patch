From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: willies952002 <admin@domnian.com>
Date: Sun, 3 Jul 2016 18:48:29 -0400
Subject: [PATCH] Add Proxy Mode API

A server can be in one of four modes:
* Offline Bungeecord
* Online Bungeecord
* Offline Velocity
* Online Velocity
* None (No Proxy)

diff --git a/src/main/java/com/domnian/paperdragon/ProxyMode.java b/src/main/java/com/domnian/paperdragon/ProxyMode.java
new file mode 100644
index 0000000000000000000000000000000000000000..843abce6e0da9ff308ddd33dc4d8034fee7d8b7a
--- /dev/null
+++ b/src/main/java/com/domnian/paperdragon/ProxyMode.java
@@ -0,0 +1,52 @@
+package com.domnian.paperdragon;
+
+public enum ProxyMode {
+
+    /**
+     * The server is not running behind any known and supported proxy
+     */
+    NONE,
+
+    /**
+     * The server is running behind a Bungeecord proxy, set to offline (unauthenticated) mode
+     */
+    BUNGEECORD_OFFLINE,
+
+    /**
+     * The server is running behind a Bungeecord proxy, set to online (authenticated) mode
+     */
+    BUNGEECORD_ONLINE,
+
+    /**
+     * The server is running behind a Velocity proxy, set to offline (unauthenticated) mode
+     */
+    VELOCITY_OFFLINE,
+
+    /**
+     * The server is running behind a Velcity proxy, set to online (authenticated) mode
+     */
+    VELOCITY_ONLINE,
+
+    /**
+     * @deprecated Internal Use Only
+     */
+    @Deprecated
+    UNKNOWN;
+
+    public boolean isProxy() {
+        return this != NONE && this != UNKNOWN;
+    }
+
+    public boolean isOnlineMode() {
+        return this == BUNGEECORD_ONLINE || this == VELOCITY_ONLINE;
+    }
+
+    public boolean isBungee() {
+        return this == BUNGEECORD_OFFLINE || this == BUNGEECORD_ONLINE;
+    }
+
+    public boolean isVelocity() {
+        return this == VELOCITY_OFFLINE || this == VELOCITY_ONLINE;
+    }
+
+}
diff --git a/src/main/java/org/bukkit/Bukkit.java b/src/main/java/org/bukkit/Bukkit.java
index 92a1462261029e804da73da2743bbd68e57841e9..9e4cdd8be3dc79d0592b52e413c489a2800f5c02 100644
--- a/src/main/java/org/bukkit/Bukkit.java
+++ b/src/main/java/org/bukkit/Bukkit.java
@@ -2429,4 +2429,14 @@ public final class Bukkit {
     public static Server.Spigot spigot() {
         return server.spigot();
     }
+
+    // PaperDragon start
+    /**
+     * Get what proxy mode the server is operating in
+     */
+    @NotNull
+    public static com.domnian.paperdragon.ProxyMode getProxyMode() {
+        return server.getProxyMode();
+    }
+    // PaperDragon end
 }
diff --git a/src/main/java/org/bukkit/Server.java b/src/main/java/org/bukkit/Server.java
index 553e14ac91cc7bdb849c31fb6452cd81df7de45d..4a32f4e08da2e1e8f4ef08202900586d3810df1e 100644
--- a/src/main/java/org/bukkit/Server.java
+++ b/src/main/java/org/bukkit/Server.java
@@ -2112,4 +2112,12 @@ public interface Server extends PluginMessageRecipient, net.kyori.adventure.audi
      */
     @NotNull org.bukkit.potion.PotionBrewer getPotionBrewer();
     // Paper end
+
+    // PaperDragon start
+    /**
+     * Get what proxy mode the server is operating in
+     */
+    @NotNull
+    com.domnian.paperdragon.ProxyMode getProxyMode();
+    // PaperDragon end
 }
