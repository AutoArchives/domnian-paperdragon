From 1f48b7d98c651f75eb390874c516739e73ec31fc Mon Sep 17 00:00:00 2001
From: willies952002 <admin@domnian.com>
Date: Thu, 9 Nov 2017 13:37:27 -0500
Subject: [PATCH] Allow Setting Player Name in AsyncPlayerPreLoginEvent

---
 .../event/player/AsyncPlayerPreLoginEvent.java     | 26 +++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/bukkit/event/player/AsyncPlayerPreLoginEvent.java b/src/main/java/org/bukkit/event/player/AsyncPlayerPreLoginEvent.java
index 1d571889..28fe404c 100644
--- a/src/main/java/org/bukkit/event/player/AsyncPlayerPreLoginEvent.java
+++ b/src/main/java/org/bukkit/event/player/AsyncPlayerPreLoginEvent.java
@@ -15,7 +15,10 @@ public class AsyncPlayerPreLoginEvent extends Event {
     private static final HandlerList handlers = new HandlerList();
     private Result result;
     private String message;
-    private final String name;
+    // PaperDragon start - Allow Setting Player Name in AsyncPlayerPreLoginEvent
+    private String name;
+    private final String originalName;
+    // PaperDragon end
     private final InetAddress ipAddress;
     private final UUID uniqueId;
 
@@ -29,6 +32,7 @@ public class AsyncPlayerPreLoginEvent extends Event {
         this.result = Result.ALLOWED;
         this.message = "";
         this.name = name;
+        this.originalName = name; // PaperDragon
         this.ipAddress = ipAddress;
         this.uniqueId = uniqueId;
     }
@@ -139,6 +143,26 @@ public class AsyncPlayerPreLoginEvent extends Event {
         return name;
     }
 
+    // PaperDragon start - Allow Setting Player Name in AsyncPlayerPreLoginEvent
+    /**
+     * Sets the player's name.
+     *
+     * @param name the player's new name
+     */
+    public void setName(String name) {
+        this.name = name;
+    }
+
+    /**
+     * Get the player's original name
+     *
+     * @return the player's original name
+     */
+    public String getOriginalName() {
+        return originalName;
+    }
+    // PaperDragon end
+
     /**
      * Gets the player IP address.
      *
-- 
2.14.1

